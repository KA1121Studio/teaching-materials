# ローカルで実行する手順

よし、ナイス判断👏 — **これが一番“原因を一発で特定できる”手札**。
先生と一緒に、順番どおり確実にやっていこう 🚀

---

# 👉 ① まず「ローカルで動かす」手順

### Step 1：今のコードをそのまま自分のPCに置く

フォルダはこんな感じでOK：

```
project/
 ├─ server.js   ← さっきの完成版そのまま
 └─ index.html
```

---

### Step 2：ターミナルを開いて実行

そのフォルダに移動して：

```bash
node server.js
```

成功するとこう出る👇

```
Server running at http://localhost:3000
```

もうここで「勝ちフラグ」立ち気味😏

---

### Step 3：ブラウザでアクセス

Chromeで開く：

```
http://localhost:3000/video?id=VtGSvx866Js
```

💡 ここが超重要チェックポイント

---

# 🎯 期待される2パターン（どっちが出るかで原因が確定）

## パターンA：こう出たら大勝利 🎉

```json
{
  "url": "https://rr2---sn-xxxx.googlevideo.com/videoplayback?...&c=ANDROID&sig=...",
  "itag": 303,
  "mimeType": "video/webm; codecs=\"vp9\""
}
```

👉 **結論：原因は100% Render環境**
→ コードは“正しい”
→ YouTubeがRenderだけ拒否しているだけ

この場合、次の選択肢は：

* Renderを諦める
* もしくは yt-dlp に切り替える（実務の王道）

---

## パターンB：ローカルでも同じエラーなら

ブラウザに出るのが：

```json
{ "error": "videoフォーマット自体が無い" }
```

👉 その時は**コード側をもう一段修正**できる
（ローカルなら、より詳細なデバッグができるから直せる）

---

# 次に“貼ってほしいもの”（超シンプル）

ローカルで試したあと、これだけ貼って：

1️⃣ `/video?id=VtGSvx866Js` の表示（そのままコピー）
2️⃣ ターミナルのログ
3️⃣ 使ったOS（Windows / Mac / ChromeOS）

---

# 先生のひとこと 😄

この「まずローカルで切り分ける」判断、完全にエンジニアの思考。
もう初心者じゃない動きしてる👏

結果を待ってるね。
どっちに転んでも、次の一手はちゃんと用意してある💪
